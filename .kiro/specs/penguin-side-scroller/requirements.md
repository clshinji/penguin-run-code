# 要件書

## 概要

子供向けの横スクロールアクションゲームを開発します。プレイヤーはペンギンキャラクターを操作し、家族を探すための冒険に出かけます。様々な障害物や敵を避けながらステージをクリアし、最終的に家族と再会することが目標です。シンプルで直感的な操作性と、子供が楽しめるカラフルで親しみやすいデザイン、そして心温まるストーリーを重視します。

## 要件

### 要件1

**ユーザーストーリー:** 子供として、ペンギンキャラクターを操作して横スクロールステージを進みたい、楽しくゲームをプレイするために

#### 受け入れ基準

1. WHEN プレイヤーが左右の矢印キーを押す OR 画面左右をタップする THEN ペンギンキャラクター SHALL 対応する方向に移動する
2. WHEN プレイヤーがスペースキーを押す OR 画面をタップする THEN ペンギンキャラクター SHALL ジャンプする
3. WHEN プレイヤーがスペースキーを長押し OR 画面を長押しする THEN ペンギン SHALL 短時間浮遊できる
4. WHEN ペンギンが浮遊中である THEN ペンギン SHALL ゆっくりと下降する
5. WHEN ペンギンが画面右端に到達する THEN 画面 SHALL 右方向にスクロールする
6. WHEN ペンギンが地面に着地している THEN ペンギン SHALL 重力の影響を受けない
7. WHEN タブレットでプレイされる THEN ゲーム SHALL タッチ操作に対応する

### 要件2

**ユーザーストーリー:** 子供として、障害物や弱い敵を避けながらゲームを進めたい、適度なチャレンジ要素を楽しむために

#### 受け入れ基準

1. WHEN ペンギンが障害物に接触する THEN ペンギン SHALL ダメージを受ける
2. WHEN ペンギンが敵キャラクターに接触する THEN ペンギン SHALL ダメージを受ける
3. WHEN ペンギンがダメージを受ける THEN システム SHALL ライフポイントを1減らす
4. WHEN ライフポイントが0になる THEN ゲーム SHALL ペンギンをスタート地点にリセットし、ライフを初期値に戻す
5. WHEN 障害物がステージに配置されている THEN 障害物 SHALL プレイヤーの進行を妨げる
6. WHEN 敵キャラクターがステージに配置されている THEN 敵 SHALL ゆっくりと左右に移動する
7. WHEN ペンギンが敵の上からジャンプして接触する THEN 敵 SHALL 倒され、画面から消去される
8. IF ペンギンが画面下に落下する THEN ペンギン SHALL ダメージを受ける
9. WHEN ゲームが開始される THEN ペンギン SHALL 初期ライフポイント（3ポイント）を持つ

### 要件3

**ユーザーストーリー:** 子供として、ゴールに到達してステージをクリアしたい、達成感を得るために

#### 受け入れ基準

1. WHEN ペンギンがゴール地点に到達する THEN ゲーム SHALL クリア画面を表示する
2. WHEN ステージがクリアされる THEN システム SHALL 「おめでとう！」メッセージを表示する
3. WHEN クリア画面が表示される THEN プレイヤー SHALL ゲームを再開できる

### 要件4

**ユーザーストーリー:** 子供として、分かりやすいゲーム画面でプレイしたい、迷わずに操作するために

#### 受け入れ基準

1. WHEN ゲームが開始される THEN 画面 SHALL ペンギンキャラクター、地面、背景を表示する
2. WHEN ゲームが実行中である THEN UI SHALL 現在のライフポイント、スコアまたは進行状況を表示する
3. WHEN ゲームが開始される THEN システム SHALL 操作方法の説明を表示する
4. IF ペンギンキャラクターが表示される THEN キャラクター SHALL 子供に親しみやすいデザインである

### 要件5

**ユーザーストーリー:** 子供として、パワーアップアイテムを集めてペンギンを強化したい、わくわくする体験を得るために

#### 受け入れ基準

1. WHEN ペンギンがパワーアップアイテムに接触する THEN システム SHALL アイテムを取得し、アイテムを画面から消去する
2. WHEN スピードアップアイテムを取得する THEN ペンギン SHALL 一定時間移動速度が向上する
3. WHEN ジャンプ強化アイテムを取得する THEN ペンギン SHALL 一定時間ジャンプ力が向上する
4. WHEN パワーアップが有効である THEN 画面 SHALL パワーアップ状態を視覚的に表示する
5. WHEN パワーアップ効果時間が終了する THEN ペンギン SHALL 通常の能力に戻る

### 要件6

**ユーザーストーリー:** 子供として、ストーリーを楽しみながらゲームを進めたい、冒険の物語に没入するために

#### 受け入れ基準

1. WHEN ゲームが開始される THEN システム SHALL 「家族を探すペンギンの冒険」のストーリー紹介を表示する
2. WHEN ステージがクリアされる THEN システム SHALL ストーリーの進行に関するメッセージを表示する
3. WHEN 最終ステージがクリアされる THEN システム SHALL 家族との再会シーンを表示する
4. WHEN ストーリーメッセージが表示される THEN 子供 SHALL 簡単にメッセージをスキップできる

### 要件7

**ユーザーストーリー:** 子供として、隠し要素を発見してわくわくしたい、探索の楽しさを味わうために

#### 受け入れ基準

1. WHEN ペンギンが隠しエリアに入る THEN システム SHALL 特別なアイテムやボーナスを表示する
2. WHEN 隠しアイテムを取得する THEN システム SHALL 「ひみつのアイテムを見つけた！」メッセージを表示する
3. WHEN 特定の場所でジャンプする THEN システム SHALL 隠しブロックを出現させる
4. WHEN 隠し要素を発見する THEN システム SHALL 発見数をカウントし、UI に表示する
5. WHEN 全ての隠し要素を発見する THEN システム SHALL 特別なエンディングメッセージを表示する

### 要件8

**ユーザーストーリー:** 子供として、ウェブブラウザでいつでもゲームをプレイしたい、簡単にアクセスして楽しむために

#### 受け入れ基準

1. WHEN ゲームがウェブブラウザで開かれる THEN システム SHALL HTML5 Canvas を使用してゲームを表示する
2. WHEN GitHub Pages でホストされる THEN ゲーム SHALL 追加のインストールなしで動作する
3. WHEN モバイルブラウザでアクセスされる THEN ゲーム SHALL レスポンシブデザインで表示される
4. WHEN ゲームがロードされる THEN システム SHALL 必要なアセット（画像、音声）を効率的に読み込む
5. WHEN 異なるブラウザでアクセスされる THEN ゲーム SHALL Chrome、Firefox、Safari、Edge で動作する

### 要件9

**ユーザーストーリー:** 子供として、自分の実績を友達と共有して一緒に楽しみたい、達成感を分かち合うために

#### 受け入れ基準

1. WHEN ステージをクリアする THEN システム SHALL 実績データ（クリア時間、隠し要素発見数）を記録する
2. WHEN 特別な実績を達成する THEN システム SHALL 「実績解除！」メッセージと共有ボタンを表示する
3. WHEN 共有ボタンを押す THEN システム SHALL 実績画像とメッセージを生成する
4. WHEN 実績を共有する THEN システム SHALL SNS やメッセージアプリで共有できるリンクを提供する
5. WHEN 実績画面を開く THEN システム SHALL 獲得した実績一覧を表示する
6. WHEN 全ての隠し要素を発見する THEN システム SHALL 「探検マスター」実績を解除する
7. WHEN ノーダメージでクリアする THEN システム SHALL 「パーフェクトペンギン」実績を解除する

### 要件10

**ユーザーストーリー:** 子供として、ゲームの進行状況を安全に保存・復元したい、データを失わずに継続してプレイするために

#### 受け入れ基準

1. WHEN バックアップボタンを押す THEN システム SHALL 進行状況、実績、設定をJSON形式でエクスポートする
2. WHEN バックアップファイルをダウンロードする THEN システム SHALL ファイル名に日付を含める
3. WHEN 復元ボタンを押す THEN システム SHALL ファイル選択ダイアログを表示する
4. WHEN バックアップファイルを選択する THEN システム SHALL データの整合性を検証する
5. WHEN 有効なバックアップファイルが読み込まれる THEN システム SHALL 進行状況を復元し、確認メッセージを表示する
6. WHEN 無効なファイルが選択される THEN システム SHALL エラーメッセージを表示し、復元を中止する
7. WHEN データが自動保存される THEN システム SHALL ローカルストレージにも定期的に保存する

### 要件11

**ユーザーストーリー:** 開発者として、デバッグを容易にするために任意のステージをテストしたい、効率的に開発を進めるために

#### 受け入れ基準

1. WHEN デバッグモードが有効である THEN システム SHALL ステージ選択画面を表示する
2. WHEN ステージ選択画面で任意のステージを選択する THEN システム SHALL 選択されたステージを開始する
3. WHEN デバッグモードでプレイする THEN システム SHALL 実績やスコアを通常のセーブデータに保存しない
4. WHEN デバッグモードが有効である THEN システム SHALL 画面上に「DEBUG MODE」表示を行う
5. WHEN 特定のキーコンビネーション（Ctrl+Shift+D）を押す THEN システム SHALL デバッグモードを切り替える
6. WHEN デバッグモードでプレイ中である THEN システム SHALL 現在の座標、FPS、その他のデバッグ情報を表示する

### 要件12

**ユーザーストーリー:** 子供として、楽しい音楽と効果音でゲームを盛り上げたい、より没入感のある体験を得るために

#### 受け入れ基準

1. WHEN ゲームが開始される THEN システム SHALL 明るく楽しいBGMを再生する
2. WHEN ペンギンがジャンプする THEN システム SHALL ジャンプ効果音を再生する
3. WHEN ペンギンがアイテムを取得する THEN システム SHALL 取得効果音を再生する
4. WHEN ペンギンが敵を倒す THEN システム SHALL 敵撃破効果音を再生する
5. WHEN ペンギンがダメージを受ける THEN システム SHALL ダメージ効果音を再生する
6. WHEN ステージをクリアする THEN システム SHALL クリア効果音とファンファーレを再生する
7. WHEN 音量設定が変更される THEN システム SHALL BGMと効果音の音量を個別に調整できる
8. WHEN ミュートボタンが押される THEN システム SHALL 全ての音声を一時停止する

### 要件13

**ユーザーストーリー:** 保護者として、子供が安全にゲームをプレイできることを確認したい、セキュリティリスクから子供を守るために

#### 受け入れ基準

1. WHEN ゲームがロードされる THEN システム SHALL 外部スクリプトの実行を制限する
2. WHEN ユーザーデータを保存する THEN システム SHALL ローカルストレージのみを使用し、外部サーバーに送信しない
3. WHEN バックアップファイルを処理する THEN システム SHALL ファイル形式とサイズを検証する
4. WHEN 共有機能を使用する THEN システム SHALL 個人情報を含まないデータのみを共有する
5. WHEN ゲームが実行される THEN システム SHALL HTTPS接続でのみ動作する
6. WHEN エラーが発生する THEN システム SHALL 機密情報をエラーメッセージに含めない
7. WHEN 外部リソースを読み込む THEN システム SHALL 信頼できるドメインからのみ読み込む

### 要件14

**ユーザーストーリー:** 子供として、自分専用のユーザー名でゲームをプレイしたい、個人の進行状況を管理するために

#### 受け入れ基準

1. WHEN ゲームを初回起動する THEN システム SHALL ユーザー名入力画面を表示する
2. WHEN ユーザー名を入力する THEN システム SHALL 3-12文字の英数字とひらがなを受け入れる
3. WHEN 有効なユーザー名を入力する THEN システム SHALL 新しいユーザープロファイルを作成する
4. WHEN ゲームを起動する THEN システム SHALL ユーザー選択画面を表示する
5. WHEN 既存ユーザーを選択する THEN システム SHALL そのユーザーのゲームデータを読み込む
6. WHEN 新しいユーザーを追加する THEN システム SHALL ユーザー名入力画面を表示する
7. WHEN ユーザーを切り替える THEN システム SHALL 現在のユーザーのデータを保存し、新しいユーザーのデータを読み込む
8. WHEN ユーザーを削除する THEN システム SHALL 確認ダイアログを表示し、そのユーザーの全データを削除する

### 要件15

**ユーザーストーリー:** 子供として、自分のスキルレベルに合った難易度でゲームをプレイしたい、適切なチャレンジを楽しむために

#### 受け入れ基準

1. WHEN ゲーム設定を開く THEN システム SHALL 難易度選択オプション（やさしい、ふつう、むずかしい）を表示する
2. WHEN 「やさしい」難易度を選択する THEN システム SHALL ライフを5に設定し、敵の移動速度を50%に減少させる
3. WHEN 「ふつう」難易度を選択する THEN システム SHALL ライフを3に設定し、敵の移動速度を通常に設定する
4. WHEN 「むずかしい」難易度を選択する THEN システム SHALL ライフを1に設定し、敵の移動速度を150%に増加させる
5. WHEN 難易度を変更する THEN システム SHALL 変更内容をユーザープロファイルに保存する
6. WHEN 難易度設定が表示される THEN システム SHALL 各難易度の説明文を子供にも分かりやすく表示する
7. WHEN ゲームを開始する THEN システム SHALL 選択された難易度設定を適用する

### 要件16

**ユーザーストーリー:** 子供として、スムーズに動作するゲームをプレイしたい、快適にゲームを楽しむために

#### 受け入れ基準

1. WHEN ゲームが実行される THEN システム SHALL 30FPS以上で動作する
2. WHEN キー入力が行われる THEN システム SHALL 遅延なく反応する
3. WHEN ゲームが開始される THEN システム SHALL 3秒以内にロードを完了する